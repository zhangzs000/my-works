<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	*{margin: 0px;padding: 0px;}
	html,body{width: 100%;height: 100%;overflow: hidden;}
	#can{
		/*
		width: 100%;
		height: 100%;
		*/
		background: #000;
		
	}
	</style>
</head>
<body>
	<canvas id="can" >
		您的浏览器不支持，请升级高版本
	</canvas>
	
	
	<input type="button" value="保存" onclick="save()"></input>
	<img src="" id="imgs">
	
	<script type="text/javascript">
		var can = document.getElementById("can");
		//获得 2d 上下文对象
		var ctx = can.getContext("2d");
		var pic = document.getElementById("imgs");
		// ctx.fillStyle="#FF0000";
		// ctx.fillRect(0,0,150,75);
		// ctx.beginPath();
		// ctx.moveTo(0,0);
		// ctx.lineTo(200,100);
		// ctx.lineTo(100,200);
		// ctx.lineTo(300,400);
		// ctx.closePath();
		// ctx.stroke();
		var w=window.innerWidth;
		var h=window.innerHeight;
		can.width=w;
		can.height=h;

		can.onmousedown=function(e){
		//document.onmousedown=function(e){
				var e = e|| window.event;
				// 属性设置或返回用于笔触的颜色、渐变或模式。
				ctx.strokeStyle = "#fff";
				ctx.lineWidth=5;
				var xx = e.clientX-can.offsetLeft;
				var yy = e.clientY-can.offsetTop;
				// 开始一条路径，或重置当前的路径。
				// ctx.beginPath();
				// 把路径移动到画布中的指定点，不创建线条。
				ctx.moveTo(xx,yy);
				//ctx.moveTo(e.clientX-can.offsetLeft,e.clientY-can.offsetTop)
			document.onmousemove=function(e){
				var e = e|| window.event;

				// 添加一个新点，然后创建从该点到画布中最后指定点的线条（该方法并不会创建线条）。
				ctx.lineTo(e.clientX-can.offsetLeft,e.clientY-can.offsetTop);
				// 实际地绘制出通过 moveTo() 和 lineTo() 方法定义的路径。默认颜色是黑色。
				ctx.stroke();
			}
			document.onmouseup = function(){
				document.onmousemove = null;
				document.onmousedown = null;
			}
		}
		function save(){
			var pics=can.toDataURL()
				console.log(pics)
				pic.src=pics
		}
	</script>
</body>
</html>
